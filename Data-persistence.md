### RDB
RDB存储的是Redis服务器中内存中的数据的状态，即数据库中内容，存储与硬盘之上，就算断电宕机，数据也不会丢失。
在服务器载入RDB文件的时候，会一直处于阻塞状态，直到载入完成为止。Redis没有专门用于载如RDB文件的命令，RDB文件的载入是在服务器启动的时候。
##### 执行的命令：
- save: 由主线程执行，在执行期间会阻塞服务器，服务器无法向外界提供服务。
- bgsave: 由子线程执行，执行期间不阻塞服务器，服务器任然可以继续处理客户端请求。

##### 间隔自动保存：
Redis允许通过save命令来配置自动保存条件。
例如：save 20 5000 服务器再20秒内，对数据库进行了至少5000此修改（对数据的修改更新操作，而非命令的条数，若一条命令中有3次数据的修改则统计为3次），那就会自动执行一次BGSAVE。
同时可以配置多条执行条件，只要满足一条就可以执行BGSAVE命令。Redis会维持一个saveparam。数组来记录配置的条件。同时Redis也会维持dirty和lastsave两个属性来协助自动保存命令的执行。
- dirty：记录服务器距离上次执行save或者bgsave命令后对数据进行了多少次的修改操作。
- lastsave：记录服务器上一次save或者bgsave命令的执行时间。

### AOF(Append Only File)
AOF通过保存数据库执行过的命令来记录数据库的状态。
再服务器启动的时候，服务器会先判断是否开起了AOF持久化，若开启了则优先加载AOF文件，若没有则加载RDB文件。
##### Append
服务器在执行完一个写命令后，会以协议格式将被执行的写命令追加到aof_buf的缓冲区末尾。
