### Redis 缓存过期机制
过期字典表保存着数据库中所有键的过期时间。
#### 缓存过期策略：    
- 定时删除：在设置键的过期时间的同时，创建一个定时器，让定时器在键的过期时间来临时，立即执行对键的删除操作
- 惰性删除：放任键的过期时间不管，但是每次从键空间获取键的时，都检查取得的键是否过期，如果过期的话，就删除改建；如果没有过期，就返回该键。
- 定期删除：每隔一段时间，就对数据库进行一次检查，删除里面的过期键，至于要删除多少过期键，以及要检查多少个数据库，都有算法决定。
##### 定期删除
优点：内存友好，尽快的释放内存。有定时的线程在监测键的过期时间，在键马上过期的时候就会删除该键。
缺点：cpu时间不友好，影响系统的吞吐量。
##### 惰性删除
优点：cpu友好
缺点：内存不友好，若系统中有大量的过期键，且无法被访问到的话就会一直存留在内存中，占用内存空间。除非手动执行FLUSHDB。
##### 定期删除
优点：对内存及cpu都相对友好，不会占用太多cpu时间而且对内存友好。
缺点：如何确定删除的频率和删除时长。如果删除的时间持续比较长，则会占用过多的CPU时间，导致系统的吞吐量下降，如果操作执行的次数过少
那就会导致内存的浪费。    
#### Redis中的过期实现
redis使用定期删除+惰性删除来实现键的过期策略。    
在定期删除的时候，会在规定给的时间内，分多次遍历各个数据库，从数据库的过期字典表中随机检查一部分键的过期时间。每次执行的时候，
redis会有个一全局变量current_db来记录当前activie_ExpireCycle函数检查的进度，并且在下次进行检查的时候接着上次的进度进行处理。
当所有的服务器都变检查过一遍，则current_db就会重置为0，然后开始新一轮的检查。
